(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{10:(e,t,a)=>{Promise.resolve().then(a.bind(a,9230))},9230:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var r=a(5155),s=a(2115),n=a(9606),i=a(7916),o=a(9827),c=a(7599);let l=(0,o.v)(e=>({profile:null,isLoading:!1,error:null,setProfile:t=>e({profile:t}),setError:t=>e({error:t}),fetchProfile:async()=>{try{e({isLoading:!0,error:null});let t=await c.gu.getProfile();e({profile:t,isLoading:!1})}catch(t){e({error:t instanceof Error?t.message:"Failed to load profile",isLoading:!1})}},updateProfile:async t=>{try{e({isLoading:!0,error:null});let a=await c.gu.updateProfile(t);e({profile:a,isLoading:!1})}catch(t){throw e({error:t instanceof Error?t.message:"Failed to update profile",isLoading:!1}),t}}}));function d(e){let{label:t,error:a,required:s,children:n,className:i=""}=e,o=t?t.toLowerCase().replace(/\s+/g,"-"):void 0;return(0,r.jsxs)("div",{className:"space-y-1 ".concat(i),children:[t&&(0,r.jsxs)("label",{htmlFor:o,className:"block text-sm font-medium text-gray-300",children:[t,s&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),n,a&&(0,r.jsx)("p",{className:"text-sm text-red-400",role:"alert",children:a})]})}function u(e){let{name:t,control:a,label:s,placeholder:i,required:o,disabled:c,rows:l=4,className:u=""}=e,{field:{value:h,onChange:p},fieldState:{error:g}}=(0,n.as)({name:t,control:a,rules:{required:!!o&&"This field is required"}});return(0,r.jsx)(d,{label:s,error:null==g?void 0:g.message,required:o,children:(0,r.jsx)("textarea",{value:h,onChange:p,placeholder:i,disabled:c,rows:l,className:"w-full bg-gray-800 rounded-lg px-4 py-2 text-white \n                   placeholder:text-gray-500 resize-vertical min-h-[100px]\n                   disabled:opacity-50 disabled:cursor-not-allowed\n                   focus:outline-none focus:ring-2 focus:ring-blue-500\n                   ".concat(g?"ring-1 ring-red-500":"","\n                   ").concat(u)})})}let h=["Vegetarian","Vegan","Pescatarian","Gluten-Free","Dairy-Free","Keto","Paleo","Low-Carb","Low-Fat","Mediterranean","Halal","Kosher"],p=["Save Money","Meal Planning","Track Nutrition","Learn Cooking","Eat Healthier","Reduce Food Waste","Cook More Often","Try New Recipes","Weight Management","Family Meals"],g={BEGINNER:"beginner",INTERMEDIATE:"intermediate",ADVANCED:"advanced"},m={[g.BEGINNER]:"Beginner",[g.INTERMEDIATE]:"Intermediate",[g.ADVANCED]:"Advanced"},x=[1,2,3,4,5,6,8,10,12];var y=a(6046);function f(e){var t;let{name:a,value:s,control:i}=e,{field:o}=(0,n.as)({name:a,control:i,defaultValue:[]}),c=null===(t=o.value)||void 0===t?void 0:t.includes(s);return(0,r.jsx)("button",{type:"button",onClick:()=>{let e=c?o.value.filter(e=>e!==s):[...o.value||[],s];o.onChange(e)},className:"px-4 py-2 rounded-lg text-sm transition-all ".concat(c?"bg-blue-500/20 text-blue-400 ring-1 ring-blue-500/50":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:s})}function b(e){let{name:t,value:a,control:s}=e,{field:i}=(0,n.as)({name:t,control:s,defaultValue:2}),o=i.value===a;return(0,r.jsx)("button",{type:"button",onClick:()=>i.onChange(a),className:"px-4 py-2 rounded-lg text-sm transition-all ".concat(o?"bg-green-500/20 text-green-400 ring-1 ring-green-500/50":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:a})}function w(e){let{name:t,value:a,label:s,control:i}=e,{field:o}=(0,n.as)({name:t,control:i,defaultValue:"beginner"}),c=o.value===a;return(0,r.jsx)("button",{type:"button",onClick:()=>o.onChange(a),className:"px-4 py-2 rounded-lg text-sm transition-all ".concat(c?"bg-purple-500/20 text-purple-400 ring-1 ring-purple-500/50":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:s})}let v={dietary_preferences:[],goals:[],cooking_experience:"beginner",default_servings:2,notes:""};function N(){let e=(0,y.useRouter)(),{profile:t,updateProfile:a}=l(),{register:o,control:c,reset:d,handleSubmit:g,formState:{isSubmitting:N}}=(0,n.mN)({defaultValues:async()=>{let{profile:e}=l.getState();return await l.getState().fetchProfile(),e||v}});(0,s.useEffect)(()=>{if(t){var e;d({dietary_preferences:t.dietary_preferences,goals:t.goals,cooking_experience:t.cooking_experience,default_servings:t.default_servings,notes:null!==(e=t.notes)&&void 0!==e?e:""})}},[t,d]);let j=async t=>{try{await a(t),e.push("/")}catch(e){console.error("Error updating profile:",e)}};return(0,r.jsx)(i.q,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-950 text-white",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:(0,r.jsxs)("form",{onSubmit:g(j),className:"bg-gray-900 rounded-lg",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 bg-gray-900 p-8 border-b border-gray-800 rounded-t-lg",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Profile Settings"}),(0,r.jsxs)("div",{className:"flex gap-3 w-full sm:w-auto",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{e.push("/")},className:"w-full sm:w-auto px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600  disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700  disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:N?"Saving...":"Save Changes"})]})]})}),(0,r.jsx)("div",{className:"p-8 max-h-[calc(100vh-200px)] overflow-y-auto",children:(0,r.jsxs)("div",{className:"space-y-6 bg-gray-800/50 rounded-xl p-4 sm:p-6 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Basic Information"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Display Name"}),(0,r.jsx)("input",{type:"text",className:"w-full bg-gray-700/50 rounded-lg px-3 py-2 text-white"})]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Preferences"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Your Goals"}),(0,r.jsx)("div",{className:"overflow-x-auto pb-2",children:(0,r.jsx)("div",{className:"flex flex-nowrap gap-2",children:p.map(e=>(0,r.jsx)(f,{name:"goals",value:e,control:c},e))})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Dietary Preferences"}),(0,r.jsx)("div",{className:"overflow-x-auto pb-2",children:(0,r.jsx)("div",{className:"flex flex-nowrap gap-2",children:h.map(e=>(0,r.jsx)(f,{name:"dietary_preferences",value:e,control:c},e))})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Cooking Experience"}),(0,r.jsx)("div",{className:"overflow-x-auto pb-2",children:(0,r.jsx)("div",{className:"flex flex-nowrap gap-2",children:Object.entries(m).map(e=>{let[t,a]=e;return(0,r.jsx)(w,{name:"cooking_experience",value:t,label:a,control:c},t)})})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Default Servings"}),(0,r.jsx)("div",{className:"overflow-x-auto pb-2",children:(0,r.jsx)("div",{className:"flex flex-nowrap gap-2",children:x.map(e=>(0,r.jsx)(b,{name:"default_servings",value:e,control:c},e))})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-300",children:"Notes"}),(0,r.jsx)(u,{name:"notes",control:c,placeholder:"Any additional notes about your preferences...",className:"bg-gray-700/50"})]})]})]})})]})})})})}},7916:(e,t,a)=>{"use strict";a.d(t,{q:()=>o});var r=a(5155),s=a(2870),n=a(6046),i=a(2115);function o(e){let{children:t}=e,{user:a,loading:o}=(0,s.A)(),c=(0,n.useRouter)(),l=(0,n.usePathname)();return((0,i.useEffect)(()=>{!o&&(a?["/login","/signup"].includes(l)&&c.push("/home"):["/home","/profile","/settings"].includes(l)&&c.push("/login"))},[a,o,c,l]),o)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):(0,r.jsx)(r.Fragment,{children:t})}},7599:(e,t,a)=>{"use strict";a.d(t,{dt:()=>o,gu:()=>l,Hv:()=>c});var r=a(1712);class s extends Error{constructor(e){super(e.message),this.error=e,this.name="ApiException"}}let n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let{data:{session:a}}=await r.N.auth.getSession();if(!(null==a?void 0:a.access_token))throw new s({status:401,message:"No active session"});let i=new Headers(t.headers);i.set("Authorization","Bearer ".concat(a.access_token));let o=await fetch("".concat("https://pocketchef-production.up.railway.app/").concat(e),{...t,headers:i,credentials:"include"});if(401===o.status){let{data:{session:a}}=await r.N.auth.refreshSession();if(null==a?void 0:a.access_token)return i.set("Authorization","Bearer ".concat(a.access_token)),n(e,t);throw new s({status:401,message:"Session expired"})}if(!o.ok)throw new s({status:o.status,message:"Request failed"});return o.json()}catch(e){if(e instanceof s)throw e;throw new s({status:500,message:"Network error",details:e})}},i=async()=>{let{data:{session:e}}=await r.N.auth.getSession();if(!e)throw Error("Not authenticated");return e.access_token},o={async getItems(){let e=await i();return n("/pantry/items",{headers:{Authorization:"Bearer ".concat(e)}})},async addItems(e){let t=await i();return n("/pantry/items",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)})},async updateItem(e,t){let a=await i();return n("/pantry/items/".concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(t)})},async deleteItem(e){let t=await i();return n("/pantry/items/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})},async clearPantry(){let e=await i();return n("/pantry/clear",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})},processReceipt:async e=>{let t=await i();return n("/pantry/receipt/process",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e})},receipt:{process:async e=>{let t=await i();return n("/pantry/receipt/process",{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e})}}},c={generate:async e=>{let t=await i();return n("/recipes/generate",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)})},linkIngredients:async e=>{let t=await i();return n("/recipes/".concat(e,"/link-ingredients"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})},getRecipeDetails:async e=>{let t=await i();return n("/recipes/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})},delete:async e=>{let t=await i();return n("/recipes/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})},interact:async(e,t)=>{let a=await i();return n("/recipes/".concat(e,"/interact"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(t)})},getInteractions:async(e,t)=>{let a=await i();return n("".concat(e?"/recipes/".concat(e,"/interactions"):"/recipes/interactions").concat(t?"?interaction_type=".concat(t):""),{headers:{Authorization:"Bearer ".concat(a)}})},isSaveData:e=>"folder"in e||"notes"in e,saveRecipe:async(e,t)=>{try{return await c.interact(e,{type:"save",data:{folder:t}})}catch(t){if(t instanceof Error&&t.message.includes("duplicate key value")){let t=await c.getInteractions(e,"save");if(t.length>0)return t[0]}throw t}},rateRecipe:async(e,t,a)=>{let r=(await c.getInteractions(e)).find(e=>"rate"===e.type);return r?n("/recipes/".concat(e,"/interactions/").concat(r.id),{method:"PATCH",headers:{Authorization:"Bearer ".concat(await i()),"Content-Type":"application/json"},body:JSON.stringify({type:"rate",data:{rating:t,review:a}})}):c.interact(e,{type:"rate",data:{rating:t,review:a}})},use:async(e,t)=>c.interact(e,{type:"cook",data:t}),getAll:async()=>{let e=await i();return n("/recipes",{headers:{Authorization:"Bearer ".concat(e)}})},getRecipe:async e=>{let t=await i();return n("/recipes/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})},getAllSuggestions:async()=>{let e=await i();return n("/recipes",{headers:{Authorization:"Bearer ".concat(e)}})}},l={async getProfile(){let e=await i();return n("/profile",{headers:{Authorization:"Bearer ".concat(e)}})},async updateProfile(e){let t=await i();return n("/profile",{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)})},async createProfile(){let e=await i();return n("/profile",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})}}},2870:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,c:()=>s});var r=a(2115);let s=(0,r.createContext)(void 0);function n(){let e=(0,r.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1712:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});let r=(0,a(5974).UU)("https://sbsieimlilcoejrqhlna.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNic2llaW1saWxjb2VqcnFobG5hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM0NjE5NjYsImV4cCI6MjA0OTAzNzk2Nn0.GT2msD-xjfOX6mhNPek7TiDCjIao8ZVvLnJtXoSrdO4",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},db:{schema:"public"}})}},e=>{var t=t=>e(e.s=t);e.O(0,[385,552,441,517,358],()=>t(10)),_N_E=e.O()}]);